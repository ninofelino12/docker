<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tabel Produk</title>
</head>
<body>
    <h1>Tabel Produk</h1>
    <p>request.render('gateway.fpartner',{'data_to_insert':'Database: '+database_name})
    database_name = http.request.env.cr.dbname
    return request.render('gateway.felino')
    # response.headers.add('Access-Control-Allow-Origin', '*')    
    #return request.make_response(response, [('Content-Type', 'application/json'),('Access-Control-Allow-Origin', '*')])
    #return request.make_response(contenttype='application/json', content=json.dumps(product_data))  </p>
    

    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nama</th>
                <th>Harga</th>
                <th>Stok</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        // Mengambil data dari file JSON
        fetch("http://localhost:8015/gateway/dataset/product.product")
            .then(response => response.json())
            .then(data => {
                // Mengisi tabel dengan data
                console.log(data.header);
                alert(data.header);
                for (const product of data) {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${product.id}</td>
                        <td>${product.name}</td>
                        <td>${product.price}</td>
                        <td>${product.stock}</td>
                    `;
                    document.querySelector("tbody").appendChild(row);
                }
            })
            .catch(error => console.error("Error:", error));
    </script>
</body>
</html>
